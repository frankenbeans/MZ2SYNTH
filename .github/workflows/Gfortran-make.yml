name: Makefile CI

on:
  push:
    branches: [ "main" ]
  pull_request:
    branches: [ "main" ]

jobs:
  build:

    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v4

    - name: Show working directory and contents
      run: pwd ; ls ;

    - name: Change directory and build project
      run: cd SOURCE ; make -f Makefile.gfortran all clean ;

    - name: Generate audio (example 2)
    - run: cd EXAMPLES ; ../SOURCE/mz2 -v -w -a 4 -x -o example-02.au example-02.ppm
